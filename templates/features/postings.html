{% extends 'shared/_layout.html' %}
{% block content %}
    <div class="container">
        <form action="" method="post">
            {{ form.csrf_token }}
            <div class="row">
                <div class="col-lg-12 text-left">
                    <h2>Posting Functions</h2>
                </div>
            </div>
            <div class="row">
                <div class="col-lg-12 text-left">
                    <p>Input a job posting to get suggested titles, or highlight keywords:</p>
                </div>
            </div>
            <div class="row">
                <div class="col-lg-2">
                    <b>{{ form.job_post.label() }}</b>
                </div>
                <div class="col-lg-10" style="max-width: 80%">
                    {{ form.job_post(rows='5',cols='100', style='max-width: 100%') }}
                </div>
            </div>
            <div class="row">
                <div class="col-lg-2">
                    <b>{{ form.options.label() }}</b>
                </div>
                <div class="col-lg-2">
                    {{ form.options() }}
                </div>
            </div>
            <div class="row">
                <div class="col-lg-2">
                    <b>{{ form.data_source.label() }}</b>
                </div>
                <div class="col-lg-2">
                    {{ form.data_source() }}
                </div>
            </div>
            <div class="row">
                <div class="col-lg-2">
                    {{ form.submit() }}
                </div>
            </div>
        </form>
        {% for message in form.job_post.errors %}
            <span class="text-warning">{{ message }}</span>
        {% endfor %}
    </div>

    <!-- Extra data -->
    {% if option %}
        <div class="container-fluid" id="output">
    {% endif %}
    {% if option %}
        {% if option == 'highlight' or option == 'combined' %}
        <div class="container">
            <b>Text:</b>
            <div>{{ text | safe }}</div>
        </div>
        {% endif %}
        {% if option == 'title' or option == 'combined' %}
                <b>Titles (ordered by relevance):</b>
                {% for title, raw_titles in data %}
                    {% if loop.index % 4 == 1 %}
                         <div class="row">
                    {% endif %}
                        <div class="col-lg-3">
                            <span class="mouse-over" data-toggle="tooltip" data-html="true" title="{{raw_titles}}">{{ title }}</span>
                        </div>
                    {% if loop.index % 4 == 0 %}
                        </div>
                    {% endif %}
                {% endfor %}
        {% endif %}
    {% if option %}
        </div>
    {% endif %}
    {% endif %}
{% endblock %}